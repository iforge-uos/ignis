// GENERATED by @gel/generate v0.6.2

import type {Duration, Executor} from "gel";

export type GetTrainingForEditingArgs = {
  readonly "id": string;
};

export type GetTrainingForEditingReturns = {
  "sections": Array<{
    "type_name": string;
    "name": string | null;
    "duration": Duration | null;
    "answers": Array<{
      "id": string;
      "content": string;
      "description": string | null;
    }>;
    "content": string;
    "enabled": boolean;
    "id": string;
    "index": number;
  }>;
  "training_lockout": Duration | null;
  "icon_url": string | null;
  "expires_after": Duration | null;
  "enabled": boolean;
  "description": string;
  "compulsory": boolean;
  "name": string;
  "locations": Array<("MAINSPACE" | "HEARTSPACE" | "GEORGE_PORTER")>;
  "in_person": boolean;
  "created_at": Date;
  "id": string;
  "updated_at": Date;
  "questions": Array<{
    "index": number;
    "enabled": boolean;
    "content": string;
    "id": string;
    "type": ("SINGLE" | "MULTI");
  }>;
  "pages": Array<{
    "index": number;
    "enabled": boolean;
    "content": string;
    "id": string;
    "duration": Duration | null;
    "name": string;
  }>;
  "rep": {
    "updated_at": Date;
    "id": string;
    "created_at": Date;
    "in_person": boolean;
    "locations": Array<("MAINSPACE" | "HEARTSPACE" | "GEORGE_PORTER")>;
    "name": string;
    "compulsory": boolean;
    "description": string;
    "enabled": boolean;
    "expires_after": Duration | null;
    "icon_url": string | null;
    "training_lockout": Duration | null;
  } | null;
};

export function getTrainingForEditing(client: Executor, args: GetTrainingForEditingArgs): Promise<GetTrainingForEditingReturns> {
  return client.queryRequiredSingle(`\
with training := <training::Training><uuid>$id,
select training {
    **,
    sections: {
        *,
        type_name := .__type__.name,
        [is training::Page].name,
        [is training::Page].duration,
        [is training::Question].answers: {
            id,
            content,
            description,
        },
    }
}`, args);

}
